(function(d,k,E,r,b,w,c,i,j){"use strict";c.settings.fakenitro||(c.settings.fakenitro={emoji:{size:48,quality:"webp"},hyperlink:{enabled:!0,customText:"\u{1F517}",useCustomText:!0,preserveEmojiName:!1,openInNewTab:!1}});const p=function(){return c.settings.fakenitro},v=function(){return p().emoji},F=function(){return p().hyperlink},x=function(e){c.settings.fakenitro={...c.settings.fakenitro,...e}},C=[32,48,56,64,96,128],S=[{label:"WebP (Smaller)",value:"webp"},{label:"Lossless (Better Quality)",value:"lossless"}],h=function(){const e=w.useProxy(p()),t=function(n,l){const a={...e},o=n.split(".");let u=a;for(let s=0;s<o.length-1;s++)u=u[o[s]];u[o[o.length-1]]=l,x(a)};return r.createElement(b.View,{style:T.container},r.createElement(i.FormSection,{title:"Emoji Settings"},r.createElement(i.FormRow,{label:"Emoji Size",subLabel:"Choose the size of the emojis in pixels",leading:r.createElement(i.FormRow.Icon,{source:{uri:"https://cdn.discordapp.com/emojis/1025763617662488646.webp"}})},r.createElement(i.FormSelect,{options:C.map(function(n){return{label:`${n}px`,value:n}}),value:e.emoji.size,onChange:function(n){return t("emoji.size",n)}})),r.createElement(i.FormRow,{label:"Emoji Quality",subLabel:"Choose between smaller file size or better quality",leading:r.createElement(i.FormRow.Icon,{source:{uri:"https://cdn.discordapp.com/emojis/1025763617662488646.webp"}})},r.createElement(i.FormSelect,{options:S,value:e.emoji.quality,onChange:function(n){return t("emoji.quality",n)}}))),r.createElement(i.FormSection,{title:"Hyperlink Settings"},r.createElement(i.FormRow,{label:"Enable Hyperlinks",subLabel:"Convert emojis to clickable hyperlinks"},r.createElement(i.FormSwitch,{value:e.hyperlink.enabled,onValueChange:function(n){return t("hyperlink.enabled",n)}})),r.createElement(i.FormRow,{label:"Use Custom Text",subLabel:"Replace emoji code with custom text in hyperlinks",disabled:!e.hyperlink.enabled},r.createElement(i.FormSwitch,{value:e.hyperlink.useCustomText,onValueChange:function(n){return t("hyperlink.useCustomText",n)},disabled:!e.hyperlink.enabled})),r.createElement(i.FormRow,{label:"Custom Text",subLabel:"Text to display instead of emoji code",disabled:!e.hyperlink.enabled||!e.hyperlink.useCustomText},r.createElement(i.FormInput,{value:e.hyperlink.customText,placeholder:"\u{1F517}",onChange:function(n){return t("hyperlink.customText",n)},disabled:!e.hyperlink.enabled||!e.hyperlink.useCustomText})),r.createElement(i.FormRow,{label:"Preserve Emoji Name",subLabel:"Show emoji name instead of code when custom text is disabled",disabled:!e.hyperlink.enabled||e.hyperlink.useCustomText},r.createElement(i.FormSwitch,{value:e.hyperlink.preserveEmojiName,onValueChange:function(n){return t("hyperlink.preserveEmojiName",n)},disabled:!e.hyperlink.enabled||e.hyperlink.useCustomText})),r.createElement(i.FormRow,{label:"Open in New Tab",subLabel:"Open emoji links in a new browser tab",disabled:!e.hyperlink.enabled},r.createElement(i.FormSwitch,{value:e.hyperlink.openInNewTab,onValueChange:function(n){return t("hyperlink.openInNewTab",n)},disabled:!e.hyperlink.enabled}))))},T=b.StyleSheet.create({container:{flex:1,padding:16}}),N=function(e,t){const n=F();if(!n.enabled)return`<${e}>`;const l=n.useCustomText?n.customText:n.preserveEmojiName?t:`:${t}:`,a=n.openInNewTab?' target="_blank"':"";return`<a href="${e}"${a}>${l}</a>`},I=/:([a-zA-Z0-9_]+):/g,f=function(e){try{return e.includes(":")?e.replace(I,function(t,n){try{const l=M(n);if(!l)return t;const a=v(),o=R(l.id,a.size,a.quality);return N(o,n)}catch(l){return console.error(`FakeNitro: Error processing emoji ${n}`,l),t}}):e}catch(t){return console.error("FakeNitro: Critical error in emoji processing",t),e}},M=function(e){const{getEmoji:t}=window.vendetta.metro.findByProps("getEmoji");return t(e)},R=function(e,t,n){return`https://cdn.discordapp.com/emojis/${e}.${n}?size=${t}&quality=lossless`};var L={name:"MessageProcessor",description:"Processes messages to replace emoji codes with custom hyperlinks",apply:function(){const e=j.findByProps("sendMessage","editMessage");if(!e)return function(){};const t=e.sendMessage,n=e.editMessage;return e.sendMessage=function(l,a){for(var o=arguments.length,u=new Array(o>2?o-2:0),s=2;s<o;s++)u[s-2]=arguments[s];return a.content&&(a.content=f(a.content)),t.call(this,l,a,...u)},e.editMessage=function(l,a,o){for(var u=arguments.length,s=new Array(u>3?u-3:0),m=3;m<u;m++)s[m-3]=arguments[m];return o.content&&(o.content=f(o.content)),n.call(this,l,a,o,...s)},function(){e.sendMessage=t,e.editMessage=n}},remove:function(){}};const g=[L];let y;const $={onLoad:function(){y=E.registerSettings("FakeNitro",h),g.forEach(function(e){const t=e.apply();typeof t=="function"&&(e.remove=t)})},onUnload:function(){y?.(),g.forEach(function(e){typeof e.remove=="function"&&e.remove()})},settings:h};var z=k.registerPlugin($);return d.default=z,Object.defineProperty(d,"__esModule",{value:!0}),d})({},vendetta.plugins,vendetta.settings,window.React,window.ReactNative,vendetta.storage,vendetta,vendetta.ui.components,vendetta.metro);
